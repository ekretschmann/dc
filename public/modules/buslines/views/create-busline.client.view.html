<section data-ng-controller="BuslinesController" data-ng-init="newBusline()">
    <h1>Create Busline</h1>

    <form>
        <fieldset>

            <div class="form-group">
                <label class="control-label" for="name">Name</label>

                <div class="controls">
                    <input type="text"
                           data-ng-model="busline.name"
                           id="name"
                           class="form-control"
                           placeholder="Name"
                           required>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label">Labels</label>

                <div ng-repeat="label in busline.labels">
                    <div class="row">
                        <div class="col-xs-3">{{label}}</div>
                        <div class="col-xs-1" style="text-align: left; margin-top: 0.5em">
                            <a href="" data-ng-click="removeLabel(label)"><i
                                    class="glyphicon glyphicon-minus-sign"></i></a>
                        </div>
                    </div>
                </div>
                <div class="controls">
                    <div class="row">
                        <div class="col-xs-3">
                            <input type="text" data-ng-model="newLabel" class="form-control" placeholder="add Label">
                        </div>
                        <div class="col-xs-1" style="text-align: left; margin-top: 0.5em">
                            <a href="" data-ng-click="addLabel()"><i class="glyphicon glyphicon-plus-sign"></i></a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label">Runtimes</label>

                <div ng-repeat="runtime in busline.runtimes">
                    <div class="row">
                        <div class="col-xs-3">{{runtime}}</div>
                        <div class="col-xs-1" style="text-align: left; margin-top: 0.5em">
                            <a href="" data-ng-click="removeRuntime(runtime)"><i
                                    class="glyphicon glyphicon-minus-sign"></i></a>
                        </div>
                    </div>
                </div>
                <div class="controls">
                    <div class="row">
                        <div class="col-xs-3">
                            <input type="text" data-ng-model="newRuntime" class="form-control"
                                   placeholder="add Runtime">
                        </div>
                        <div class="col-xs-1" style="text-align: left; margin-top: 0.5em">
                            <a href="" data-ng-click="addRuntime()"><i class="glyphicon glyphicon-plus-sign"></i></a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label">Stops</label>

                <div class="row">
                    <div class="controls col-xs-3">

                        <md-autocomplete md-no-cache="noCache"
                                         md-selected-item="selectedItem"
                                         md-search-text-change="searchTextChange(searchText)"
                                         md-search-text="searchText"
                                         md-selected-item-change="addStopToLine(item)"
                                         md-items="item in getMatches(searchText)"
                                         md-item-text="item.name"
                                         md-min-length="0"
                                         placeholder="Bus stop to add">
                            <md-item-template>
                                <span md-highlight-text="searchText" md-highlight-flags="^i">{{item.name}}</span>
                            </md-item-template>
                            <md-not-found>
                                No stops matching "{{searchText}}" were found.
                                <!--<a ng-click="ctrl.newState(searchText)">Create a new one!</a>-->
                            </md-not-found>
                        </md-autocomplete>

                    </div>

                    <div class="controls col-xs-8">
                        <div ng-repeat="stop in busline.stops">
                            <div class="row">
                                <div class="col-xs-2">
                                    <a href="" data-ng-click="removeStop(stop)">
                                        <i class="glyphicon glyphicon-minus-sign"></i>
                                    </a> {{stop}}
                                </div>

                                <div class="col-xs-5">


                                    <input type="number"
                                           ng-model="busline.times[$index]"
                                           placeholder="set Time ">

                                </div>


                            </div>

                        </div>
                    </div>
                </div>


            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-default" ng-click="create()">
            </div>
            <div data-ng-show="error" class="text-danger">
                <strong data-ng-bind="error"></strong>
            </div>
        </fieldset>
    </form>
</section>
