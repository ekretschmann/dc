<section data-ng-controller="BuslinesController" data-ng-init="newBusline()">
    <h1>Create Busline</h1>

    <form data-ng-submit="create()" novalidate>
        <fieldset>

            <div class="form-group">
                <label class="control-label" for="name">Name</label>

                <div class="controls">
                    <input type="text"
                           data-ng-model="busline.name"
                           id="name"
                           class="form-control"
                           placeholder="Name"
                           required>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label">Stops</label>

                <div ng-repeat="stop in busline.stops">
                    <div>
                        <div><a href="" data-ng-click="removeStop(stop)"><i
                                class="glyphicon glyphicon-minus-sign"></i></a> {{stop.name}}</div>

                        <div>Arrivals</div>
                        <div ng-if="!stop.arrivals || stop.arrivals.length === 0">no arrival times</div>
                        <div ng-repeat="time in stop.arrivals">
                            {{time}}
                        </div>

                        <div>Departures</div>
                        <div ng-if="!stop.departures || stop.departures.length === 0">no departure times</div>
                        <div ng-repeat="time in stop.departures">
                            {{time}}
                        </div>

                    </div>

                        <!--<div class="col-xs-3">-->
                            <!--<input type="text" data-ng-model="arrivalTime" class="form-control"-->
                                   <!--placeholder="add Arrival Time">-->
                           <!--</div>-->
                        <!--<div class="col-xs-1" style="text-align: left">-->
                            <!--<a href="" data-ng-click="addArrivalTime()"><i class="glyphicon glyphicon-plus-sign"></i></a>-->
                        <!--</div>-->
                       <!--<div class="col-xs-4">-->
                        <!--<input type="text" data-ng-model="departureTime" class="form-control"-->
                               <!--placeholder="add Departure Time">-->

                        <!--<a href="" data-ng-click="addDepartureTime()"><i class="glyphicon glyphicon-plus-sign"></i></a>-->
                            <!--</div>-->
                    <!--</div>-->


                </div>
                <div class="controls">
                    <div class="row">
                        <div class="col-xs-3">
                            <md-autocomplete md-selected-item="selectedBusstop"
                                             md-search-text="searchText"
                                             md-items="stop in getMatches(searchText)"
                                             md-item-text="stop.name">

                            </md-autocomplete>

                            <!--<input type="text" data-ng-model="newLine" class="form-control" placeholder="add Stop">-->
                        </div>
                        <div class="col-xs-1" style="text-align: left; margin-top: 0.5em">
                            <a href="" data-ng-click="addStopToLine()"><i class="glyphicon glyphicon-plus-sign"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-default">
            </div>
            <div data-ng-show="error" class="text-danger">
                <strong data-ng-bind="error"></strong>
            </div>
        </fieldset>
    </form>
</section>
